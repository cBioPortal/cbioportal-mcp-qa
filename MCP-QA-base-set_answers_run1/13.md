# Question 13

**Type:** Survival Analysis - Gene Alteration

**Question:** For the TCGA pan-cancer cohort what is the survival difference and the corresponding statistical significance between patients with mutations in both TP53 and KRAS versus patients with only a KRAS mutation?

**Answer:**

## Summary of Analysis: Survival Difference Between TP53+KRAS vs KRAS-only Mutations in TCGA Pan-Cancer Cohort

Based on my analysis of the TCGA PanCancer Atlas 2018 cohort, here are the key findings:

### Patient Cohorts:
- **KRAS-only mutations**: 418 patients
- **TP53 and KRAS co-mutations**: 331 patients
- Total analyzed: 749 patients with survival data

### Survival Outcomes:

**KRAS-only group:**
- Mean survival: 29.86 months (95% CI: 27.25-32.46)
- Median survival: 21.16 months
- Death rate: 31.1% (130/418 patients)

**TP53+KRAS group:**
- Mean survival: 26.64 months (95% CI: 23.72-29.57)
- Median survival: 19.33 months  
- Death rate: 37.5% (124/331 patients)

### Statistical Significance:
- **Mean difference**: 3.21 months longer survival for KRAS-only vs TP53+KRAS
- **t-statistic**: 1.607
- **Degrees of freedom**: 707.8
- **Standard error**: 2.00 months

The t-statistic of 1.607 with ~708 degrees of freedom corresponds to a **p-value of approximately 0.108** (two-tailed test), which is **not statistically significant** at the conventional α = 0.05 level.

### Interpretation:
While patients with KRAS-only mutations show a trend toward better survival outcomes compared to those with both TP53 and KRAS mutations (3.2 months longer mean survival and 6.4% lower death rate), this difference is **not statistically significant** (p ≈ 0.108). 

The analysis included patients from multiple cancer types, with colorectal adenocarcinoma, lung adenocarcinoma, pancreatic adenocarcinoma, and endometrial carcinoma being the most represented. The co-occurrence of TP53 mutations with KRAS mutations appears to be associated with a slightly worse prognosis, but the evidence is not strong enough to conclude a statistically significant survival difference in this pan-cancer analysis.

---

## SQL Queries Executed

### Query 1
**Timestamp:** 2025-09-30 17:51:40

```sql
SELECT cancer_study_identifier, name
FROM cancer_study
WHERE cancer_study_identifier LIKE '%tcga_pan_can%' OR name LIKE '%TCGA Pan%' OR name LIKE '%pan%cancer%'
LIMIT 10
```

### Query 2
**Timestamp:** 2025-09-30 17:51:45

```sql
SELECT cancer_study_identifier, name
FROM cancer_study
WHERE cancer_study_identifier LIKE '%pan_can%' OR name LIKE '%Pan-Cancer%'
ORDER BY cancer_study_identifier
```

### Query 3
**Timestamp:** 2025-09-30 17:51:55

```sql
SELECT DISTINCT attribute_name
FROM clinical_data_derived
WHERE cancer_study_identifier LIKE '%tcga_pan_can_atlas_2018%'
AND (attribute_name LIKE '%survival%' OR attribute_name LIKE '%OS%' OR attribute_name LIKE '%time%' OR attribute_name LIKE '%status%')
ORDER BY attribute_name
```

### Query 4
**Timestamp:** 2025-09-30 17:52:07

```sql
WITH mutation_status AS (
SELECT
patient_unique_id,
cancer_study_identifier,
MAX(CASE WHEN hugo_gene_symbol = 'TP53' AND variant_type = 'mutation' THEN 1 ELSE 0 END) as has_tp53_mutation,
MAX(CASE WHEN hugo_gene_symbol = 'KRAS' AND variant_type = 'mutation' THEN 1 ELSE 0 END) as has_kras_mutation
FROM genomic_event_derived
WHERE cancer_study_identifier LIKE '%tcga_pan_can_atlas_2018%'
AND variant_type = 'mutation'
AND hugo_gene_symbol IN ('TP53', 'KRAS')
GROUP BY patient_unique_id, cancer_study_identifier
),
mutation_groups AS (
SELECT
patient_unique_id,
cancer_study_identifier,
CASE
WHEN has_tp53_mutation = 1 AND has_kras_mutation = 1 THEN 'TP53_and_KRAS'
WHEN has_tp53_mutation = 0 AND has_kras_mutation = 1 THEN 'KRAS_only'
ELSE 'other'
END as mutation_group
FROM mutation_status
WHERE has_kras_mutation = 1  -- Only include patients with KRAS mutations
)
SELECT
mg.mutation_group,
COUNT(*) as patient_count,
AVG(CAST(os.attribute_value AS Float64)) as mean_os_months,
median(CAST(os.attribute_value AS Float64)) as median_os_months,
stddevSamp(CAST(os.attribute_value AS Float64)) as std_os_months
FROM mutation_groups mg
JOIN clinical_data_derived os ON mg.patient_unique_id = os.patient_unique_id
AND os.attribute_name = 'OS_MONTHS'
AND os.attribute_value != ''
AND os.attribute_value != 'NA'
JOIN clinical_data_derived status ON mg.patient_unique_id = status.patient_unique_id
AND status.attribute_name = 'OS_STATUS'
AND status.attribute_value != ''
WHERE mg.mutation_group IN ('TP53_and_KRAS', 'KRAS_only')
GROUP BY mg.mutation_group
ORDER BY mg.mutation_group
```

### Query 5
**Timestamp:** 2025-09-30 17:52:12

```sql
SELECT
patient_unique_id,
hugo_gene_symbol,
COUNT(*) as mutation_count
FROM genomic_event_derived
WHERE cancer_study_identifier LIKE '%tcga_pan_can_atlas_2018%'
AND variant_type = 'mutation'
AND hugo_gene_symbol IN ('TP53', 'KRAS')
GROUP BY patient_unique_id, hugo_gene_symbol
ORDER BY patient_unique_id
LIMIT 20
```

### Query 6
**Timestamp:** 2025-09-30 17:52:17

```sql
SELECT
patient_unique_id,
groupArray(hugo_gene_symbol) as mutated_genes
FROM genomic_event_derived
WHERE cancer_study_identifier LIKE '%tcga_pan_can_atlas_2018%'
AND variant_type = 'mutation'
AND hugo_gene_symbol IN ('TP53', 'KRAS')
GROUP BY patient_unique_id
HAVING length(mutated_genes) > 0
ORDER BY mutated_genes DESC
LIMIT 20
```

### Query 7
**Timestamp:** 2025-09-30 17:52:22

```sql
SELECT
patient_unique_id,
has(groupArray(hugo_gene_symbol), 'TP53') as has_tp53,
has(groupArray(hugo_gene_symbol), 'KRAS') as has_kras
FROM genomic_event_derived
WHERE cancer_study_identifier LIKE '%tcga_pan_can_atlas_2018%'
AND variant_type = 'mutation'
AND hugo_gene_symbol IN ('TP53', 'KRAS')
GROUP BY patient_unique_id
HAVING has_kras = 1
ORDER BY has_tp53 DESC, patient_unique_id
LIMIT 20
```

### Query 8
**Timestamp:** 2025-09-30 17:52:27

```sql
SELECT
CASE WHEN has_tp53 = 1 THEN 'TP53_and_KRAS' ELSE 'KRAS_only' END as mutation_group,
COUNT(*) as patient_count
FROM (
SELECT
patient_unique_id,
has(groupArray(hugo_gene_symbol), 'TP53') as has_tp53,
has(groupArray(hugo_gene_symbol), 'KRAS') as has_kras
FROM genomic_event_derived
WHERE cancer_study_identifier LIKE '%tcga_pan_can_atlas_2018%'
AND variant_type = 'mutation'
AND hugo_gene_symbol IN ('TP53', 'KRAS')
GROUP BY patient_unique_id
HAVING has_kras = 1
) as mutation_data
GROUP BY mutation_group
```

### Query 9
**Timestamp:** 2025-09-30 17:52:35

```sql
SELECT
CASE WHEN has_tp53 = 1 THEN 'TP53_and_KRAS' ELSE 'KRAS_only' END as mutation_group,
COUNT(*) as patient_count,
AVG(os_months) as mean_os_months,
quantile(0.5)(os_months) as median_os_months,
stddevSamp(os_months) as std_os_months,
MIN(os_months) as min_os_months,
MAX(os_months) as max_os_months
FROM (
SELECT
m.patient_unique_id,
has(groupArray(m.hugo_gene_symbol), 'TP53') as has_tp53,
has(groupArray(m.hugo_gene_symbol), 'KRAS') as has_kras,
toFloat64OrNull(os.attribute_value) as os_months
FROM genomic_event_derived m
LEFT JOIN clinical_data_derived os ON m.patient_unique_id = os.patient_unique_id
AND os.attribute_name = 'OS_MONTHS'
AND os.attribute_value != ''
AND os.attribute_value != 'NA'
WHERE m.cancer_study_identifier LIKE '%tcga_pan_can_atlas_2018%'
AND m.variant_type = 'mutation'
AND m.hugo_gene_symbol IN ('TP53', 'KRAS')
GROUP BY m.patient_unique_id, os_months
HAVING has_kras = 1 AND os_months IS NOT NULL
) as survival_data
GROUP BY mutation_group
```

### Query 10
**Timestamp:** 2025-09-30 17:52:43

```sql
SELECT
CASE WHEN has_tp53 = 1 THEN 'TP53_and_KRAS' ELSE 'KRAS_only' END as mutation_group,
os_months,
os_status
FROM (
SELECT
m.patient_unique_id,
has(groupArray(m.hugo_gene_symbol), 'TP53') as has_tp53,
has(groupArray(m.hugo_gene_symbol), 'KRAS') as has_kras,
toFloat64OrNull(os.attribute_value) as os_months,
status.attribute_value as os_status
FROM genomic_event_derived m
LEFT JOIN clinical_data_derived os ON m.patient_unique_id = os.patient_unique_id
AND os.attribute_name = 'OS_MONTHS'
AND os.attribute_value != ''
AND os.attribute_value != 'NA'
LEFT JOIN clinical_data_derived status ON m.patient_unique_id = status.patient_unique_id
AND status.attribute_name = 'OS_STATUS'
AND status.attribute_value != ''
WHERE m.cancer_study_identifier LIKE '%tcga_pan_can_atlas_2018%'
AND m.variant_type = 'mutation'
AND m.hugo_gene_symbol IN ('TP53', 'KRAS')
GROUP BY m.patient_unique_id, os_months, os_status
HAVING has_kras = 1 AND os_months IS NOT NULL AND os_status != ''
) as survival_data
ORDER BY mutation_group, os_months
LIMIT 20
```

### Query 11
**Timestamp:** 2025-09-30 17:52:54

```sql
SELECT
mutation_group,
COUNT(*) as n,
AVG(os_months) as mean_survival,
quantile(0.5)(os_months) as median_survival,
quantile(0.25)(os_months) as q25_survival,
quantile(0.75)(os_months) as q75_survival,
stddevSamp(os_months) as std_dev,
SUM(CASE WHEN os_status = '1:DECEASED' THEN 1 ELSE 0 END) as deaths,
SUM(CASE WHEN os_status = '1:DECEASED' THEN 1 ELSE 0 END) / COUNT(*) as death_rate
FROM (
SELECT
CASE WHEN has_tp53 = 1 THEN 'TP53_and_KRAS' ELSE 'KRAS_only' END as mutation_group,
os_months,
os_status
FROM (
SELECT
m.patient_unique_id,
has(groupArray(m.hugo_gene_symbol), 'TP53') as has_tp53,
has(groupArray(m.hugo_gene_symbol), 'KRAS') as has_kras,
toFloat64OrNull(os.attribute_value) as os_months,
status.attribute_value as os_status
FROM genomic_event_derived m
LEFT JOIN clinical_data_derived os ON m.patient_unique_id = os.patient_unique_id
AND os.attribute_name = 'OS_MONTHS'
AND os.attribute_value != ''
AND os.attribute_value != 'NA'
LEFT JOIN clinical_data_derived status ON m.patient_unique_id = status.patient_unique_id
AND status.attribute_name = 'OS_STATUS'
AND status.attribute_value != ''
WHERE m.cancer_study_identifier LIKE '%tcga_pan_can_atlas_2018%'
AND m.variant_type = 'mutation'
AND m.hugo_gene_symbol IN ('TP53', 'KRAS')
GROUP BY m.patient_unique_id, os_months, os_status
HAVING has_kras = 1 AND os_months IS NOT NULL AND os_status != ''
) as survival_data
) as final_data
GROUP BY mutation_group
ORDER BY mutation_group
```

### Query 12
**Timestamp:** 2025-09-30 17:53:02

```sql
SELECT
CASE WHEN has_tp53 = 1 THEN 'TP53_and_KRAS' ELSE 'KRAS_only' END as mutation_group,
cancer_study_identifier,
COUNT(*) as patient_count
FROM (
SELECT
m.patient_unique_id,
m.cancer_study_identifier,
has(groupArray(m.hugo_gene_symbol), 'TP53') as has_tp53,
has(groupArray(m.hugo_gene_symbol), 'KRAS') as has_kras,
toFloat64OrNull(os.attribute_value) as os_months
FROM genomic_event_derived m
LEFT JOIN clinical_data_derived os ON m.patient_unique_id = os.patient_unique_id
AND os.attribute_name = 'OS_MONTHS'
AND os.attribute_value != ''
AND os.attribute_value != 'NA'
WHERE m.cancer_study_identifier LIKE '%tcga_pan_can_atlas_2018%'
AND m.variant_type = 'mutation'
AND m.hugo_gene_symbol IN ('TP53', 'KRAS')
GROUP BY m.patient_unique_id, m.cancer_study_identifier, os_months
HAVING has_kras = 1 AND os_months IS NOT NULL
) as mutation_data
GROUP BY mutation_group, cancer_study_identifier
ORDER BY mutation_group, patient_count DESC
```

### Query 13
**Timestamp:** 2025-09-30 17:53:13

```sql
SELECT
mutation_group,
AVG(os_months) as mean_survival,
quantile(0.5)(os_months) as median_survival,
COUNT(*) as total_patients,
SUM(CASE WHEN os_status = '1:DECEASED' THEN 1 ELSE 0 END) as total_deaths,
-- Calculate 95% confidence intervals for the means
mean_survival - 1.96 * stddevSamp(os_months) / sqrt(COUNT(*)) as mean_ci_lower,
mean_survival + 1.96 * stddevSamp(os_months) / sqrt(COUNT(*)) as mean_ci_upper,
-- Calculate standard error for comparison
stddevSamp(os_months) / sqrt(COUNT(*)) as standard_error,
stddevSamp(os_months) as std_dev
FROM (
SELECT
CASE WHEN has_tp53 = 1 THEN 'TP53_and_KRAS' ELSE 'KRAS_only' END as mutation_group,
os_months,
os_status
FROM (
SELECT
m.patient_unique_id,
has(groupArray(m.hugo_gene_symbol), 'TP53') as has_tp53,
has(groupArray(m.hugo_gene_symbol), 'KRAS') as has_kras,
toFloat64OrNull(os.attribute_value) as os_months,
status.attribute_value as os_status
FROM genomic_event_derived m
LEFT JOIN clinical_data_derived os ON m.patient_unique_id = os.patient_unique_id
AND os.attribute_name = 'OS_MONTHS'
AND os.attribute_value != ''
AND os.attribute_value != 'NA'
LEFT JOIN clinical_data_derived status ON m.patient_unique_id = status.patient_unique_id
AND status.attribute_name = 'OS_STATUS'
AND status.attribute_value != ''
WHERE m.cancer_study_identifier LIKE '%tcga_pan_can_atlas_2018%'
AND m.variant_type = 'mutation'
AND m.hugo_gene_symbol IN ('TP53', 'KRAS')
GROUP BY m.patient_unique_id, os_months, os_status
HAVING has_kras = 1 AND os_months IS NOT NULL AND os_status != ''
) as survival_data
) as final_data
GROUP BY mutation_group
ORDER BY mutation_group
```

### Query 14
**Timestamp:** 2025-09-30 17:53:25

```sql
SELECT
-- Group statistics
countIf(mutation_group = 'KRAS_only') as n1,
countIf(mutation_group = 'TP53_and_KRAS') as n2,
avgIf(os_months, mutation_group = 'KRAS_only') as mean1,
avgIf(os_months, mutation_group = 'TP53_and_KRAS') as mean2,
varSampIf(os_months, mutation_group = 'KRAS_only') as var1,
varSampIf(os_months, mutation_group = 'TP53_and_KRAS') as var2,
-- Calculate pooled standard error and t-statistic
mean1 - mean2 as mean_difference,
sqrt(var1/n1 + var2/n2) as pooled_se,
(mean1 - mean2) / sqrt(var1/n1 + var2/n2) as t_statistic,
-- Degrees of freedom (Welch's approximation)
pow(var1/n1 + var2/n2, 2) / (pow(var1/n1, 2)/(n1-1) + pow(var2/n2, 2)/(n2-1)) as df
FROM (
SELECT
CASE WHEN has_tp53 = 1 THEN 'TP53_and_KRAS' ELSE 'KRAS_only' END as mutation_group,
os_months
FROM (
SELECT
m.patient_unique_id,
has(groupArray(m.hugo_gene_symbol), 'TP53') as has_tp53,
has(groupArray(m.hugo_gene_symbol), 'KRAS') as has_kras,
toFloat64OrNull(os.attribute_value) as os_months
FROM genomic_event_derived m
LEFT JOIN clinical_data_derived os ON m.patient_unique_id = os.patient_unique_id
AND os.attribute_name = 'OS_MONTHS'
AND os.attribute_value != ''
AND os.attribute_value != 'NA'
WHERE m.cancer_study_identifier LIKE '%tcga_pan_can_atlas_2018%'
AND m.variant_type = 'mutation'
AND m.hugo_gene_symbol IN ('TP53', 'KRAS')
GROUP BY m.patient_unique_id, os_months
HAVING has_kras = 1 AND os_months IS NOT NULL
) as survival_data
) as final_data
```


---

## Model Information
**Model:** anthropic:claude-sonnet-4-20250514
**Provider:** Anthropic
**Max Tokens:** 4096

---

*Generated on 2025-09-30 17:53:37*