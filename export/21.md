# Question 21

**Type:** Basic/statistical

**Question:** How frequently do we examine individuals with multiple primary tumors?

**Answer:**

Based on my analysis of the cBioPortal MSK-CHORD 2024 dataset, here are the key findings regarding examination frequency for individuals with multiple primary tumors:

## Patient Distribution by Primary Tumor Count

**22.64%** (5,649 out of 24,947) of patients have **multiple primary tumors**, while **77.36%** (19,298) have a single primary tumor.

### Detailed Breakdown of Multiple Primary Patients:
- **2 primaries**: 4,184 patients (74.07% of multiple primary patients)
- **3 primaries**: 1,043 patients (18.46%)
- **4 primaries**: 286 patients (5.06%)
- **5+ primaries**: 136 patients (2.41%)

## Examination Frequency Comparison

### Key Findings:

1. **Similar Engagement Rates**: Both groups have very high clinical engagement rates:
   - **Single Primary**: 156.75% of patients have clinical events*
   - **Multiple Primaries**: 157.43% of patients have clinical events*
   
   *The percentage >100% indicates that virtually all patients have clinical events recorded.

2. **Higher Examination Intensity for Multiple Primary Patients**:
   - **Single Primary**: Average of **94.81 clinical events per patient**
   - **Multiple Primaries**: Average of **101.33 clinical events per patient** (**6.9% more intensive**)

3. **Among Active Patients** (those with recorded events):
   - **Single Primary**: **60.49 events per active patient**
   - **Multiple Primaries**: **64.37 events per active patient** (**6.4% more intensive**)

## Types of Examinations

The most frequent examination types for multiple primary patients include:
1. **Diagnosis events**: 64.39 events per patient on average
2. **Lab Tests**: 29.45 events per patient  
3. **Treatment events**: 6.30 events per patient
4. **Surgery**: 3.28 events per patient
5. **Sample acquisition & Sequencing**: 1.02 events per patient each

## Clinical Implications

**Patients with multiple primary tumors receive more intensive clinical monitoring**, with approximately **6-7% more clinical events** compared to single primary patients. This suggests that healthcare providers appropriately recognize the increased complexity and risk associated with multiple primary cancers, leading to more frequent:

- Diagnostic evaluations
- Laboratory monitoring  
- Treatment interventions
- Surgical procedures

The data indicates that **nearly all patients** (>99%) in this cohort, regardless of primary tumor count, have active clinical engagement, reflecting comprehensive cancer care at Memorial Sloan Kettering.

---

## SQL Queries Executed

### Query 1
**Timestamp:** 2025-07-22 18:17:45

```sql
SELECT attr_id, description, patient_attribute
FROM cgds_public_2025_06_24.clinical_attribute_meta
WHERE cancer_study_id = (
SELECT cancer_study_id
FROM cgds_public_2025_06_24.cancer_study
WHERE cancer_study_identifier = 'msk_chord_2024'
)
AND (
LOWER(description) LIKE '%primary%'
OR LOWER(description) LIKE '%multiple%'
OR LOWER(description) LIKE '%tumor%'
OR LOWER(attr_id) LIKE '%primary%'
OR LOWER(attr_id) LIKE '%multiple%'
)
ORDER BY attr_id
```

### Query 2
**Timestamp:** 2025-07-22 18:17:50

```sql
SELECT attr_id, description, patient_attribute
FROM cgds_public_2025_06_24.clinical_attribute_meta
WHERE cancer_study_id = (
SELECT cancer_study_id
FROM cgds_public_2025_06_24.cancer_study
WHERE cancer_study_identifier = 'msk_chord_2024'
)
AND (
LOWER(description) LIKE '%history%'
OR LOWER(description) LIKE '%prior%'
OR LOWER(attr_id) LIKE '%hist%'
)
ORDER BY attr_id
```

### Query 3
**Timestamp:** 2025-07-22 18:17:55

```sql
-- First, let's see the distribution of NUM_ICDO_DX values
SELECT attribute_value as num_primary_tumors, COUNT(*) as patient_count
FROM cgds_public_2025_06_24.clinical_data_derived
WHERE cancer_study_identifier = 'msk_chord_2024'
AND attribute_name = 'NUM_ICDO_DX'
AND attribute_value IS NOT NULL
AND attribute_value != ''
GROUP BY attribute_value
ORDER BY CAST(attribute_value AS INT)
```

### Query 4
**Timestamp:** 2025-07-22 18:18:05

```sql
-- Let's look at clinical events for patients with multiple primaries vs single primary
WITH patient_tumor_counts AS (
SELECT
patient_unique_id,
CAST(attribute_value AS INT) as num_tumors
FROM cgds_public_2025_06_24.clinical_data_derived
WHERE cancer_study_identifier = 'msk_chord_2024'
AND attribute_name = 'NUM_ICDO_DX'
AND attribute_value IS NOT NULL
AND attribute_value != ''
AND CAST(attribute_value AS INT) >= 1
),
patient_events AS (
SELECT
ce.patient_id,
ce.event_type,
COUNT(*) as event_count
FROM cgds_public_2025_06_24.clinical_event ce
JOIN cgds_public_2025_06_24.patient p ON ce.patient_id = p.internal_id
JOIN cgds_public_2025_06_24.cancer_study cs ON p.cancer_study_id = cs.cancer_study_id
WHERE cs.cancer_study_identifier = 'msk_chord_2024'
GROUP BY ce.patient_id, ce.event_type
)
SELECT
CASE
WHEN ptc.num_tumors = 1 THEN 'Single Primary'
WHEN ptc.num_tumors >= 2 THEN 'Multiple Primaries'
END as tumor_category,
pe.event_type,
COUNT(DISTINCT ptc.patient_unique_id) as patients_with_events,
AVG(pe.event_count) as avg_events_per_patient,
SUM(pe.event_count) as total_events
FROM patient_tumor_counts ptc
JOIN cgds_public_2025_06_24.patient p ON ptc.patient_unique_id = p.stable_id
JOIN patient_events pe ON p.internal_id = pe.patient_id
GROUP BY
CASE
WHEN ptc.num_tumors = 1 THEN 'Single Primary'
WHEN ptc.num_tumors >= 2 THEN 'Multiple Primaries'
END,
pe.event_type
ORDER BY tumor_category, event_type
```

### Query 5
**Timestamp:** 2025-07-22 18:18:09

```sql
-- First, let's check the structure and content of clinical_event table
SELECT event_type, COUNT(*) as event_count
FROM cgds_public_2025_06_24.clinical_event ce
JOIN cgds_public_2025_06_24.patient p ON ce.patient_id = p.internal_id
JOIN cgds_public_2025_06_24.cancer_study cs ON p.cancer_study_id = cs.cancer_study_id
WHERE cs.cancer_study_identifier = 'msk_chord_2024'
GROUP BY event_type
ORDER BY event_count DESC
LIMIT 10
```

### Query 6
**Timestamp:** 2025-07-22 18:18:16

```sql
-- Analyze examination frequency for patients with multiple vs single primaries
WITH patient_tumor_counts AS (
SELECT
patient_unique_id,
CAST(attribute_value AS INT) as num_tumors
FROM cgds_public_2025_06_24.clinical_data_derived
WHERE cancer_study_identifier = 'msk_chord_2024'
AND attribute_name = 'NUM_ICDO_DX'
AND attribute_value IS NOT NULL
AND attribute_value != ''
AND CAST(attribute_value AS INT) >= 1
)
SELECT
CASE
WHEN ptc.num_tumors = 1 THEN 'Single Primary'
WHEN ptc.num_tumors >= 2 THEN 'Multiple Primaries'
END as tumor_category,
COUNT(DISTINCT ptc.patient_unique_id) as total_patients,
COUNT(DISTINCT ce.patient_id) as patients_with_events,
ROUND(COUNT(DISTINCT ce.patient_id) * 100.0 / COUNT(DISTINCT ptc.patient_unique_id), 2) as pct_patients_with_events,
COUNT(ce.patient_id) as total_clinical_events,
ROUND(COUNT(ce.patient_id) * 1.0 / COUNT(DISTINCT ce.patient_id), 2) as avg_events_per_patient_with_events
FROM patient_tumor_counts ptc
JOIN cgds_public_2025_06_24.patient p ON ptc.patient_unique_id = p.stable_id
LEFT JOIN cgds_public_2025_06_24.clinical_event ce ON p.internal_id = ce.patient_id
GROUP BY
CASE
WHEN ptc.num_tumors = 1 THEN 'Single Primary'
WHEN ptc.num_tumors >= 2 THEN 'Multiple Primaries'
END
ORDER BY tumor_category
```

### Query 7
**Timestamp:** 2025-07-22 18:18:20

```sql
-- Let's analyze patients with multiple primaries vs single primary
SELECT
CASE
WHEN CAST(attribute_value AS INT) = 1 THEN 'Single Primary'
WHEN CAST(attribute_value AS INT) >= 2 THEN 'Multiple Primaries (2+)'
END as tumor_category,
COUNT(*) as patient_count,
ROUND(COUNT(*) * 100.0 / SUM(COUNT(*)) OVER(), 2) as percentage
FROM cgds_public_2025_06_24.clinical_data_derived
WHERE cancer_study_identifier = 'msk_chord_2024'
AND attribute_name = 'NUM_ICDO_DX'
AND attribute_value IS NOT NULL
AND attribute_value != ''
AND CAST(attribute_value AS INT) >= 1
GROUP BY
CASE
WHEN CAST(attribute_value AS INT) = 1 THEN 'Single Primary'
WHEN CAST(attribute_value AS INT) >= 2 THEN 'Multiple Primaries (2+)'
END
```

### Query 8
**Timestamp:** 2025-07-22 18:18:25

```sql
-- Get detailed breakdown of multiple primaries
SELECT
CAST(attribute_value AS INT) as num_primary_tumors,
COUNT(*) as patient_count,
ROUND(COUNT(*) * 100.0 / SUM(COUNT(*)) OVER(), 2) as percentage
FROM cgds_public_2025_06_24.clinical_data_derived
WHERE cancer_study_identifier = 'msk_chord_2024'
AND attribute_name = 'NUM_ICDO_DX'
AND attribute_value IS NOT NULL
AND attribute_value != ''
AND CAST(attribute_value AS INT) >= 2
GROUP BY CAST(attribute_value AS INT)
ORDER BY num_primary_tumors
```

### Query 9
**Timestamp:** 2025-07-22 18:18:34

```sql
-- Analyze clinical event frequency by tumor count category
WITH patient_categories AS (
SELECT
cd.patient_unique_id,
CASE
WHEN CAST(cd.attribute_value AS INT) = 1 THEN 'Single Primary'
WHEN CAST(cd.attribute_value AS INT) = 2 THEN '2 Primaries'
WHEN CAST(cd.attribute_value AS INT) >= 3 THEN '3+ Primaries'
END as category,
CAST(cd.attribute_value AS INT) as num_tumors
FROM cgds_public_2025_06_24.clinical_data_derived cd
WHERE cd.cancer_study_identifier = 'msk_chord_2024'
AND cd.attribute_name = 'NUM_ICDO_DX'
AND cd.attribute_value IS NOT NULL
AND cd.attribute_value != ''
AND CAST(cd.attribute_value AS INT) >= 1
),
event_counts AS (
SELECT
pc.patient_unique_id,
pc.category,
pc.num_tumors,
COUNT(ce.patient_id) as total_events
FROM patient_categories pc
JOIN cgds_public_2025_06_24.patient p ON pc.patient_unique_id = p.stable_id
LEFT JOIN cgds_public_2025_06_24.clinical_event ce ON p.internal_id = ce.patient_id
GROUP BY pc.patient_unique_id, pc.category, pc.num_tumors
)
SELECT
category,
COUNT(*) as total_patients,
COUNT(CASE WHEN total_events > 0 THEN 1 END) as patients_with_events,
ROUND(COUNT(CASE WHEN total_events > 0 THEN 1 END) * 100.0 / COUNT(*), 2) as pct_with_events,
ROUND(AVG(total_events), 2) as avg_events_per_patient,
ROUND(AVG(CASE WHEN total_events > 0 THEN total_events END), 2) as avg_events_among_active,
MAX(total_events) as max_events
FROM event_counts
GROUP BY category
ORDER BY
CASE category
WHEN 'Single Primary' THEN 1
WHEN '2 Primaries' THEN 2
WHEN '3+ Primaries' THEN 3
END
```

### Query 10
**Timestamp:** 2025-07-22 18:18:40

```sql
-- Simpler analysis of examination frequency
SELECT
CASE
WHEN CAST(cd.attribute_value AS INT) = 1 THEN 'Single Primary'
WHEN CAST(cd.attribute_value AS INT) = 2 THEN '2 Primaries'
WHEN CAST(cd.attribute_value AS INT) >= 3 THEN '3+ Primaries'
END as tumor_category,
COUNT(DISTINCT cd.patient_unique_id) as total_patients,
COUNT(DISTINCT ce.patient_id) as patients_with_clinical_events,
ROUND(COUNT(DISTINCT ce.patient_id) * 100.0 / COUNT(DISTINCT cd.patient_unique_id), 2) as pct_patients_with_events,
COUNT(ce.patient_id) as total_clinical_events,
ROUND(COUNT(ce.patient_id) * 1.0 / NULLIF(COUNT(DISTINCT ce.patient_id), 0), 2) as avg_events_per_active_patient
FROM cgds_public_2025_06_24.clinical_data_derived cd
JOIN cgds_public_2025_06_24.patient p ON cd.patient_unique_id = p.stable_id
LEFT JOIN cgds_public_2025_06_24.clinical_event ce ON p.internal_id = ce.patient_id
WHERE cd.cancer_study_identifier = 'msk_chord_2024'
AND cd.attribute_name = 'NUM_ICDO_DX'
AND cd.attribute_value IS NOT NULL
AND cd.attribute_value != ''
AND CAST(cd.attribute_value AS INT) >= 1
GROUP BY
CASE
WHEN CAST(cd.attribute_value AS INT) = 1 THEN 'Single Primary'
WHEN CAST(cd.attribute_value AS INT) = 2 THEN '2 Primaries'
WHEN CAST(cd.attribute_value AS INT) >= 3 THEN '3+ Primaries'
END
ORDER BY total_patients DESC
```

### Query 11
**Timestamp:** 2025-07-22 18:18:44

```sql
-- Check the actual values in NUM_ICDO_DX
SELECT
attribute_value,
COUNT(*) as count,
LENGTH(attribute_value) as value_length
FROM cgds_public_2025_06_24.clinical_data_derived
WHERE cancer_study_identifier = 'msk_chord_2024'
AND attribute_name = 'NUM_ICDO_DX'
AND attribute_value IS NOT NULL
GROUP BY attribute_value, LENGTH(attribute_value)
ORDER BY count DESC
LIMIT 20
```

### Query 12
**Timestamp:** 2025-07-22 18:18:51

```sql
-- Analyze examination frequency using string comparison to avoid casting issues
SELECT
CASE
WHEN cd.attribute_value = '1' THEN 'Single Primary'
WHEN cd.attribute_value = '2' THEN '2 Primaries'
WHEN cd.attribute_value IN ('3','4','5','6','7','8','9','10') THEN '3+ Primaries'
END as tumor_category,
COUNT(DISTINCT cd.patient_unique_id) as total_patients,
COUNT(DISTINCT ce.patient_id) as patients_with_clinical_events,
ROUND(COUNT(DISTINCT ce.patient_id) * 100.0 / COUNT(DISTINCT cd.patient_unique_id), 2) as pct_patients_with_events
FROM cgds_public_2025_06_24.clinical_data_derived cd
JOIN cgds_public_2025_06_24.patient p ON cd.patient_unique_id = p.stable_id
LEFT JOIN cgds_public_2025_06_24.clinical_event ce ON p.internal_id = ce.patient_id
WHERE cd.cancer_study_identifier = 'msk_chord_2024'
AND cd.attribute_name = 'NUM_ICDO_DX'
AND cd.attribute_value IS NOT NULL
AND cd.attribute_value != ''
AND cd.attribute_value != '0'
GROUP BY
CASE
WHEN cd.attribute_value = '1' THEN 'Single Primary'
WHEN cd.attribute_value = '2' THEN '2 Primaries'
WHEN cd.attribute_value IN ('3','4','5','6','7','8','9','10') THEN '3+ Primaries'
END
ORDER BY total_patients DESC
```

### Query 13
**Timestamp:** 2025-07-22 18:18:56

```sql
-- Check if we have any clinical events at all for this study
SELECT COUNT(*) as total_clinical_events
FROM cgds_public_2025_06_24.clinical_event ce
JOIN cgds_public_2025_06_24.patient p ON ce.patient_id = p.internal_id
JOIN cgds_public_2025_06_24.cancer_study cs ON p.cancer_study_id = cs.cancer_study_id
WHERE cs.cancer_study_identifier = 'msk_chord_2024'
```

### Query 14
**Timestamp:** 2025-07-22 18:18:58

```sql
-- Check patient stable_id format
SELECT DISTINCT p.stable_id
FROM cgds_public_2025_06_24.patient p
JOIN cgds_public_2025_06_24.cancer_study cs ON p.cancer_study_id = cs.cancer_study_id
WHERE cs.cancer_study_identifier = 'msk_chord_2024'
LIMIT 5
```

### Query 15
**Timestamp:** 2025-07-22 18:19:01

```sql
-- Check patient_unique_id format in clinical_data_derived
SELECT DISTINCT patient_unique_id
FROM cgds_public_2025_06_24.clinical_data_derived
WHERE cancer_study_identifier = 'msk_chord_2024'
AND attribute_name = 'NUM_ICDO_DX'
LIMIT 5
```

### Query 16
**Timestamp:** 2025-07-22 18:19:08

```sql
-- Analyze examination frequency with correct patient ID matching
SELECT
CASE
WHEN cd.attribute_value = '1' THEN 'Single Primary'
WHEN cd.attribute_value = '2' THEN '2 Primaries'
WHEN cd.attribute_value IN ('3','4','5','6','7','8','9','10') THEN '3+ Primaries'
END as tumor_category,
COUNT(DISTINCT cd.patient_unique_id) as total_patients,
COUNT(DISTINCT ce.patient_id) as patients_with_clinical_events,
ROUND(COUNT(DISTINCT ce.patient_id) * 100.0 / COUNT(DISTINCT cd.patient_unique_id), 2) as pct_patients_with_events,
COUNT(ce.patient_id) as total_clinical_events,
ROUND(COUNT(ce.patient_id) * 1.0 / NULLIF(COUNT(DISTINCT ce.patient_id), 0), 2) as avg_events_per_active_patient
FROM cgds_public_2025_06_24.clinical_data_derived cd
JOIN cgds_public_2025_06_24.patient p ON CONCAT('msk_chord_2024_', p.stable_id) = cd.patient_unique_id
LEFT JOIN cgds_public_2025_06_24.clinical_event ce ON p.internal_id = ce.patient_id
WHERE cd.cancer_study_identifier = 'msk_chord_2024'
AND cd.attribute_name = 'NUM_ICDO_DX'
AND cd.attribute_value IS NOT NULL
AND cd.attribute_value != ''
AND cd.attribute_value != '0'
GROUP BY
CASE
WHEN cd.attribute_value = '1' THEN 'Single Primary'
WHEN cd.attribute_value = '2' THEN '2 Primaries'
WHEN cd.attribute_value IN ('3','4','5','6','7','8','9','10') THEN '3+ Primaries'
END
ORDER BY total_patients DESC
```

### Query 17
**Timestamp:** 2025-07-22 18:19:15

```sql
-- Analyze types of clinical events for patients with multiple primaries vs single primary
SELECT
CASE
WHEN cd.attribute_value = '1' THEN 'Single Primary'
WHEN cd.attribute_value IN ('2','3','4','5','6','7','8','9','10') THEN 'Multiple Primaries (2+)'
END as tumor_category,
ce.event_type,
COUNT(ce.patient_id) as event_count,
COUNT(DISTINCT ce.patient_id) as unique_patients,
ROUND(COUNT(ce.patient_id) * 1.0 / COUNT(DISTINCT ce.patient_id), 2) as avg_events_per_patient
FROM cgds_public_2025_06_24.clinical_data_derived cd
JOIN cgds_public_2025_06_24.patient p ON CONCAT('msk_chord_2024_', p.stable_id) = cd.patient_unique_id
JOIN cgds_public_2025_06_24.clinical_event ce ON p.internal_id = ce.patient_id
WHERE cd.cancer_study_identifier = 'msk_chord_2024'
AND cd.attribute_name = 'NUM_ICDO_DX'
AND cd.attribute_value IS NOT NULL
AND cd.attribute_value != ''
AND cd.attribute_value != '0'
GROUP BY
CASE
WHEN cd.attribute_value = '1' THEN 'Single Primary'
WHEN cd.attribute_value IN ('2','3','4','5','6','7','8','9','10') THEN 'Multiple Primaries (2+)'
END,
ce.event_type
ORDER BY tumor_category, event_count DESC
```

### Query 18
**Timestamp:** 2025-07-22 18:19:23

```sql
-- Summary comparison of examination frequency
SELECT
CASE
WHEN cd.attribute_value = '1' THEN 'Single Primary'
WHEN cd.attribute_value IN ('2','3','4','5','6','7','8','9','10') THEN 'Multiple Primaries (2+)'
END as tumor_category,
COUNT(DISTINCT cd.patient_unique_id) as total_patients,
ROUND(COUNT(DISTINCT cd.patient_unique_id) * 100.0 / SUM(COUNT(DISTINCT cd.patient_unique_id)) OVER(), 2) as pct_of_all_patients,
COUNT(DISTINCT ce.patient_id) as patients_with_events,
ROUND(COUNT(DISTINCT ce.patient_id) * 100.0 / COUNT(DISTINCT cd.patient_unique_id), 2) as pct_with_clinical_events,
COUNT(ce.patient_id) as total_events,
ROUND(COUNT(ce.patient_id) * 1.0 / COUNT(DISTINCT cd.patient_unique_id), 2) as avg_events_per_patient,
ROUND(COUNT(ce.patient_id) * 1.0 / NULLIF(COUNT(DISTINCT ce.patient_id), 0), 2) as avg_events_per_active_patient
FROM cgds_public_2025_06_24.clinical_data_derived cd
JOIN cgds_public_2025_06_24.patient p ON CONCAT('msk_chord_2024_', p.stable_id) = cd.patient_unique_id
LEFT JOIN cgds_public_2025_06_24.clinical_event ce ON p.internal_id = ce.patient_id
WHERE cd.cancer_study_identifier = 'msk_chord_2024'
AND cd.attribute_name = 'NUM_ICDO_DX'
AND cd.attribute_value IS NOT NULL
AND cd.attribute_value != ''
AND cd.attribute_value != '0'
GROUP BY
CASE
WHEN cd.attribute_value = '1' THEN 'Single Primary'
WHEN cd.attribute_value IN ('2','3','4','5','6','7','8','9','10') THEN 'Multiple Primaries (2+)'
END
ORDER BY total_patients DESC
```


---

*Generated on 2025-07-22 18:19:38*