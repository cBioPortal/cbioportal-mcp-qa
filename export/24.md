# Question 24

**Type:** Basic/statistical

**Question:** Is there a correlation between smoking history and Pancreatic Cancer?

**Answer:**

Based on this analysis, here are the key findings regarding the correlation between smoking history and pancreatic cancer:

## Smoking History and Pancreatic Cancer Analysis

### Key Findings:

1. **Overall Smoking Distribution in Pancreatic Cancer Patients:**
   - Never smokers: 55.55% (1,731 patients)
   - Former/Current smokers: 41.01% (1,278 patients)  
   - Unknown: 3.43% (107 patients)

2. **Comparison with General Population in Dataset:**
   - **Never smokers**: 55.55% in pancreatic cancer vs 48.98% in all patients
   - **Former/Current smokers**: 41.01% in pancreatic cancer vs 46.54% in all patients

### Statistical Interpretation:

**Interestingly, this data suggests a NEGATIVE correlation** between smoking and pancreatic cancer in this dataset:

- Pancreatic cancer patients have a **higher proportion of never smokers** (55.55% vs 48.98%)
- Pancreatic cancer patients have a **lower proportion of smokers** (41.01% vs 46.54%)

### Subtype Analysis:
Both major pancreatic cancer subtypes show similar patterns:
- **Pancreatic Adenocarcinoma**: 56.6% never smokers, 43.4% former/current smokers
- **Pancreatic Neuroendocrine Tumor**: 68.0% never smokers, 32.0% former/current smokers

### Important Considerations:

1. **Dataset Limitations**: This analysis is based on a single cancer center dataset (MSK-CHORD) which may not be representative of the general population
2. **Selection Bias**: Cancer center populations may differ from population-based studies
3. **Smoking Classification**: The data uses NLP-derived smoking predictions, which may have classification limitations
4. **Established Literature**: This finding contrasts with established epidemiological literature that consistently shows smoking as a risk factor for pancreatic cancer

**Conclusion**: While this specific dataset shows pancreatic cancer patients having lower smoking rates than the general patient population, this should be interpreted cautiously given potential selection biases and dataset limitations. The established medical literature consistently identifies smoking as a significant risk factor for pancreatic cancer.

---

## SQL Queries Executed

### Query 1
**Timestamp:** 2025-07-22 18:20:30

```sql
SELECT attr_id, description, patient_attribute
FROM cgds_public_2025_06_24.clinical_attribute_meta
WHERE cancer_study_id = (SELECT cancer_study_id FROM cgds_public_2025_06_24.cancer_study WHERE cancer_study_identifier = 'msk_chord_2024')
AND (LOWER(description) LIKE '%smok%' OR LOWER(attr_id) LIKE '%smok%')
ORDER BY attr_id
```

### Query 2
**Timestamp:** 2025-07-22 18:20:33

```sql
SELECT DISTINCT attribute_value as cancer_type, COUNT(*) as patient_count
FROM cgds_public_2025_06_24.clinical_data_derived
WHERE attribute_name = 'CANCER_TYPE'
AND LOWER(attribute_value) LIKE '%pancrea%'
GROUP BY attribute_value
ORDER BY patient_count DESC
```

### Query 3
**Timestamp:** 2025-07-22 18:20:36

```sql
SELECT DISTINCT attribute_value as detailed_cancer_type, COUNT(*) as patient_count
FROM cgds_public_2025_06_24.clinical_data_derived
WHERE attribute_name = 'CANCER_TYPE_DETAILED'
AND LOWER(attribute_value) LIKE '%pancrea%'
GROUP BY attribute_value
ORDER BY patient_count DESC
LIMIT 10
```

### Query 4
**Timestamp:** 2025-07-22 18:20:41

```sql
WITH pancreatic_patients AS (
SELECT DISTINCT patient_unique_id
FROM cgds_public_2025_06_24.clinical_data_derived
WHERE attribute_name = 'CANCER_TYPE'
AND attribute_value = 'Pancreatic Cancer'
),
smoking_data AS (
SELECT patient_unique_id, attribute_value as smoking_status
FROM cgds_public_2025_06_24.clinical_data_derived
WHERE attribute_name = 'SMOKING_PREDICTIONS_3_CLASSES'
AND patient_unique_id IN (SELECT patient_unique_id FROM pancreatic_patients)
)
SELECT
smoking_status,
COUNT(*) as patient_count,
ROUND(COUNT(*) * 100.0 / SUM(COUNT(*)) OVER(), 2) as percentage
FROM smoking_data
GROUP BY smoking_status
ORDER BY patient_count DESC
```

### Query 5
**Timestamp:** 2025-07-22 18:20:53

```sql
WITH all_patients_smoking AS (
SELECT
'All Patients' as group_type,
attribute_value as smoking_status,
COUNT(*) as patient_count
FROM cgds_public_2025_06_24.clinical_data_derived
WHERE attribute_name = 'SMOKING_PREDICTIONS_3_CLASSES'
GROUP BY attribute_value
),
pancreatic_patients_smoking AS (
SELECT
'Pancreatic Cancer' as group_type,
s.attribute_value as smoking_status,
COUNT(*) as patient_count
FROM cgds_public_2025_06_24.clinical_data_derived s
WHERE s.attribute_name = 'SMOKING_PREDICTIONS_3_CLASSES'
AND s.patient_unique_id IN (
SELECT DISTINCT patient_unique_id
FROM cgds_public_2025_06_24.clinical_data_derived
WHERE attribute_name = 'CANCER_TYPE'
AND attribute_value = 'Pancreatic Cancer'
)
GROUP BY s.attribute_value
),
combined AS (
SELECT * FROM all_patients_smoking
UNION ALL
SELECT * FROM pancreatic_patients_smoking
),
percentages AS (
SELECT
group_type,
smoking_status,
patient_count,
ROUND(patient_count * 100.0 / SUM(patient_count) OVER(PARTITION BY group_type), 2) as percentage
FROM combined
)
SELECT
smoking_status,
MAX(CASE WHEN group_type = 'All Patients' THEN patient_count END) as all_patients_count,
MAX(CASE WHEN group_type = 'All Patients' THEN percentage END) as all_patients_pct,
MAX(CASE WHEN group_type = 'Pancreatic Cancer' THEN patient_count END) as pancreatic_count,
MAX(CASE WHEN group_type = 'Pancreatic Cancer' THEN percentage END) as pancreatic_pct
FROM percentages
GROUP BY smoking_status
ORDER BY pancreatic_count DESC
```

### Query 6
**Timestamp:** 2025-07-22 18:20:57

```sql
SELECT
c.attribute_value as cancer_subtype,
s.attribute_value as smoking_status,
COUNT(*) as patient_count
FROM cgds_public_2025_06_24.clinical_data_derived c
JOIN cgds_public_2025_06_24.clinical_data_derived s
ON c.patient_unique_id = s.patient_unique_id
WHERE c.attribute_name = 'CANCER_TYPE_DETAILED'
AND c.attribute_value IN ('Pancreatic Adenocarcinoma', 'Pancreatic Neuroendocrine Tumor')
AND s.attribute_name = 'SMOKING_PREDICTIONS_3_CLASSES'
AND s.attribute_value != 'Unknown'
GROUP BY c.attribute_value, s.attribute_value
ORDER BY c.attribute_value, patient_count DESC
```


---

*Generated on 2025-07-22 18:21:08*